@{
    ViewData["Title"] = "Home Page";
    
}
@section Styles{
    <link href="~/css/Clienti.css" rel="stylesheet" />
}

<!--FORM RICERCA-->
<main class="main-content">
    <div class="container lg:w-3/4 mx-auto">
        <div class="hero">
            <h1>Scopri i migliori saloni vicino a te</h1>
            @* <p>Prenota trattamenti di bellezza, benessere e molto altro con un click</p> *@
        </div>

        <form action="/Search" method="get" class="search-form dark:bg-gray-700" id="homeSearchForm">
            <div class="form-row">
                <div class="form-group">
                    <label for="service" class="dark:text-white">Che servizio stai cercando?</label>
                    <input type="text" id="service" name="q" placeholder="Es. Taglio capelli, Manicure, Massaggio">
                </div>
                <div class="form-group">
                    <label for="location" class="dark:text-white">Dove?</label>
                    <input type="text" id="location" name="location" placeholder="Città, quartiere o codice postale">
                </div>
                <div class="form-group">
                    <label for="date" class="dark:text-white">Quando?</label>
                    <input type="date" id="date" name="data" min="@DateTime.Now.ToString("yyyy-MM-dd")">
                </div>
                <button type="submit" class="search-btn mb-1">Cerca</button>
            </div>
        </form>
    </div>
</main>
<!--CARD SALONI-->
<section class="salons-section dark:bg-gray-800/80">
    <div class="container lg:w-3/4 mx-auto">
        <h2 class="section-title dark:text-gray-300">Saloni popolari nella tua zona</h2>

        <div class="filters">
            <button class="filter-btn active">Tutti</button>
            <button class="filter-btn">Parrucchieri</button>
            <button class="filter-btn">Centri Estetici</button>
            <button class="filter-btn">Spa & Benessere</button>
            <button class="filter-btn">Barbieri</button>
            <button class="filter-btn">Nail Salon</button>
        </div>

        <div class="salons-grid">
            <div class="salon-card">
                <div class="salon-image"></div>
                <div class="salon-info">
                    <div class="salon-header">
                        <div>
                            <h3 class="salon-name">Bella Vista Hair Studio</h3>
                            <div class="salon-location">
                                📍 Milano, Brera
                            </div>
                        </div>
                        <div class="salon-rating">
                            <span class="stars">★★★★★</span>
                            <span class="rating-text">4.8 (127)</span>
                        </div>
                    </div>
                    <div class="salon-services">
                        <div class="services-title">Servizi</div>
                        <div class="services-list">
                            <span class="service-tag">Taglio donna</span>
                            <span class="service-tag">Colore</span>
                            <span class="service-tag">Piega</span>
                            <span class="service-tag">Trattamenti</span>
                        </div>
                    </div>
                    <div class="salon-footer">
                        <span class="price-range">€25 - €150</span>
                        <button class="book-btn">Prenota ora</button>
                    </div>
                </div>
            </div>

            <div class="salon-card">
                <div class="salon-image"></div>
                <div class="salon-info">
                    <div class="salon-header">
                        <div>
                            <h3 class="salon-name">Zen Spa & Wellness</h3>
                            <div class="salon-location">
                                📍 Roma, Trastevere
                            </div>
                        </div>
                        <div class="salon-rating">
                            <span class="stars">★★★★☆</span>
                            <span class="rating-text">4.6 (89)</span>
                        </div>
                    </div>
                    <div class="salon-services">
                        <div class="services-title">Servizi</div>
                        <div class="services-list">
                            <span class="service-tag">Massaggi</span>
                            <span class="service-tag">Trattamenti viso</span>
                            <span class="service-tag">Sauna</span>
                            <span class="service-tag">Aromaterapia</span>
                        </div>
                    </div>
                    <div class="salon-footer">
                        <span class="price-range">€40 - €200</span>
                        <button class="book-btn">Prenota ora</button>
                    </div>
                </div>
            </div>

            <div class="salon-card">
                <div class="salon-image"></div>
                <div class="salon-info">
                    <div class="salon-header">
                        <div>
                            <h3 class="salon-name">Nails & Beauty Lab</h3>
                            <div class="salon-location">
                                📍 Firenze, Centro
                            </div>
                        </div>
                        <div class="salon-rating">
                            <span class="stars">★★★★★</span>
                            <span class="rating-text">4.9 (203)</span>
                        </div>
                    </div>
                    <div class="salon-services">
                        <div class="services-title">Servizi</div>
                        <div class="services-list">
                            <span class="service-tag">Manicure</span>
                            <span class="service-tag">Pedicure</span>
                            <span class="service-tag">Nail art</span>
                            <span class="service-tag">Gel</span>
                        </div>
                    </div>
                    <div class="salon-footer">
                        <span class="price-range">€15 - €80</span>
                        <button class="book-btn">Prenota ora</button>
                    </div>
                </div>
            </div>

            <div class="salon-card">
                <div class="salon-image"></div>
                <div class="salon-info">
                    <div class="salon-header">
                        <div>
                            <h3 class="salon-name">Gentleman's Barbershop</h3>
                            <div class="salon-location">
                                📍 Torino, Quadrilatero
                            </div>
                        </div>
                        <div class="salon-rating">
                            <span class="stars">★★★★☆</span>
                            <span class="rating-text">4.5 (156)</span>
                        </div>
                    </div>
                    <div class="salon-services">
                        <div class="services-title">Servizi</div>
                        <div class="services-list">
                            <span class="service-tag">Taglio uomo</span>
                            <span class="service-tag">Barba</span>
                            <span class="service-tag">Shampoo</span>
                            <span class="service-tag">Styling</span>
                        </div>
                    </div>
                    <div class="salon-footer">
                        <span class="price-range">€20 - €60</span>
                        <button class="book-btn">Prenota ora</button>
                    </div>
                </div>
            </div>

            <div class="salon-card">
                <div class="salon-image"></div>
                <div class="salon-info">
                    <div class="salon-header">
                        <div>
                            <h3 class="salon-name">Estetica Moderna</h3>
                            <div class="salon-location">
                                📍 Bologna, Centro
                            </div>
                        </div>
                        <div class="salon-rating">
                            <span class="stars">★★★★★</span>
                            <span class="rating-text">4.7 (94)</span>
                        </div>
                    </div>
                    <div class="salon-services">
                        <div class="services-title">Servizi</div>
                        <div class="services-list">
                            <span class="service-tag">Trattamenti viso</span>
                            <span class="service-tag">Epilazione</span>
                            <span class="service-tag">Microblading</span>
                            <span class="service-tag">Pulizia viso</span>
                        </div>
                    </div>
                    <div class="salon-footer">
                        <span class="price-range">€30 - €120</span>
                        <button class="book-btn">Prenota ora</button>
                    </div>
                </div>
            </div>

            <div class="salon-card">
                <div class="salon-image"></div>
                <div class="salon-info">
                    <div class="salon-header">
                        <div>
                            <h3 class="salon-name">Luxury Hair & Beauty</h3>
                            <div class="salon-location">
                                📍 Napoli, Vomero
                            </div>
                        </div>
                        <div class="salon-rating">
                            <span class="stars">★★★★☆</span>
                            <span class="rating-text">4.4 (67)</span>
                        </div>
                    </div>
                    <div class="salon-services">
                        <div class="services-title">Servizi</div>
                        <div class="services-list">
                            <span class="service-tag">Taglio & colore</span>
                            <span class="service-tag">Extension</span>
                            <span class="service-tag">Keratina</span>
                            <span class="service-tag">Styling</span>
                        </div>
                    </div>
                    <div class="salon-footer">
                        <span class="price-range">€35 - €180</span>
                        <button class="book-btn">Prenota ora</button>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>
<!--SEZIONE ILLUSTRATIVA PER POTENZIALI PARTNER-->
<div class="bg-gray-50 py-24 sm:py-32 dark:bg-gray-700/80">
    <div class="mx-auto max-w-2xl px-6 lg:max-w-7xl lg:px-8">
        <h2 class="text-center text-base/7 font-semibold text-purple-600">Gestisci il tuo salone</h2>
        <p class="mx-auto mt-2 max-w-lg text-center text-4xl font-semibold tracking-tight text-balance text-gray-950 sm:text-5x dark:text-gray-300">Tutto quello che serve per la tua attività</p>
        <div class="mt-10 grid gap-4 sm:mt-16 lg:grid-cols-3 lg:grid-rows-2">
            <div class="relative lg:row-span-2">
                <div class="absolute inset-px rounded-lg bg-white lg:rounded-l-4xl"></div>
                <div class="relative flex h-full flex-col overflow-hidden rounded-[calc(var(--radius-lg)+1px)] lg:rounded-l-[calc(2rem+1px)]">
                    <div class="px-8 pt-8 pb-3 sm:px-10 sm:pt-10 sm:pb-0">
                        <p class="mt-2 text-lg font-medium tracking-tight text-gray-950 max-lg:text-center">Prenotazioni 24/7</p>
                        <p class="mt-2 max-w-lg text-sm/6 text-gray-600 max-lg:text-center">I tuoi clienti possono prenotare in qualsiasi momento dal loro smartphone, anche fuori orario.</p>
                    </div>
                    <div class="@@container relative min-h-120 w-full grow max-lg:mx-auto max-lg:max-w-sm">
                        <div class="absolute inset-x-10 top-10 bottom-0 overflow-hidden rounded-t-3xl border-x-[0.5em] border-t-[0.5em] border-gray-700 bg-gray-900 shadow-2xl">
                            <img class="size-full object-cover object-top" src="/img/calendario.jpg" alt="">
                        </div>
                    </div>
                </div>
                <div class="pointer-events-none absolute inset-px rounded-lg shadow-sm ring-1 ring-black/5 lg:rounded-l-4xl"></div>
            </div>
            <div class="relative max-lg:row-start-1">
                <div class="absolute inset-px rounded-lg bg-white max-lg:rounded-t-4xl"></div>
                <div class="relative flex h-full flex-col overflow-hidden rounded-[calc(var(--radius-lg)+1px)] max-lg:rounded-t-[calc(2rem+1px)]">
                    <div class="px-8 pt-8 sm:px-10 sm:pt-10">
                        <p class="mt-2 text-lg font-medium tracking-tight text-gray-950 max-lg:text-center">Calendario Intelligente</p>
                        <p class="mt-2 max-w-lg text-sm/6 text-gray-600 max-lg:text-center">Gestisci appuntamenti, staff e servizi in un'unica dashboard intuitiva e veloce.</p>
                    </div>
                    <div class="flex flex-1 items-center justify-center px-8 max-lg:pt-10 max-lg:pb-12 sm:px-10 lg:pb-2">
                        <img class="max-lg:max-w-xs h-[min(152px,40cqw)] object-cover w-full rounded object-top" src="https://images.unsplash.com/photo-1562217180-021f74991332?q=80&w=2670&auto=format&fit=crop&ixlib=rb-4.1.0&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D" alt="">
                    </div>
                </div>
                <div class="pointer-events-none absolute inset-px rounded-lg shadow-sm ring-1 ring-black/5 max-lg:rounded-t-4xl"></div>
            </div>
            <div class="relative max-lg:row-start-3 lg:col-start-2 lg:row-start-2">
                <div class="absolute inset-px rounded-lg bg-white"></div>
                <div class="relative flex h-full flex-col overflow-hidden rounded-[calc(var(--radius-lg)+1px)]">
                    <div class="px-8 pt-8 sm:px-10 sm:pt-10">
                        <p class="mt-2 text-lg font-medium tracking-tight text-gray-950 max-lg:text-center">Gestione Clienti</p>
                        <p class="mt-2 max-w-lg text-sm/6 text-gray-600 max-lg:text-center">Storico trattamenti, preferenze e promemoria automatici per fidelizzare la tua clientela.</p>
                    </div>
                    <div class="px-8 max-lg:pt-10 max-lg:pb-12 pt-4 pb-5 sm:px-10">
                        <img class="h-[min(152px,40cqw)] object-cover w-full rounded" src="https://images.unsplash.com/photo-1608222351212-18fe0ec7b13b?q=80&w=2574&auto=format&fit=crop&ixlib=rb-4.1.0&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D" alt="">
                    </div>
                </div>
                <div class="pointer-events-none absolute inset-px rounded-lg shadow-sm ring-1 ring-black/5"></div>
            </div>
            <div class="relative lg:row-span-2">
                <div class="absolute inset-px rounded-lg bg-white max-lg:rounded-b-4xl lg:rounded-r-4xl"></div>
                <div class="relative flex h-full flex-col overflow-hidden rounded-[calc(var(--radius-lg)+1px)] max-lg:rounded-b-[calc(2rem+1px)] lg:rounded-r-[calc(2rem+1px)]">
                    <div class="px-8 pt-8 pb-3 sm:px-10 sm:pt-10 sm:pb-0">
                        <p class="mt-2 text-lg font-medium tracking-tight text-gray-950 max-lg:text-center">Automazioni Smart</p>
                        <p class="mt-2 max-w-lg text-sm/6 text-gray-600 max-lg:text-center">Conferme automatiche, reminder SMS e sincronizzazione con i tuoi strumenti preferiti.</p>
                    </div>
                    <div class="relative min-h-120 w-full grow">
                        <div class="absolute top-10 right-0 bottom-0 left-10 overflow-hidden rounded-tl-xl bg-gray-900 shadow-2xl">
                            <img class="size-full object-cover" src="/img/notifiche.png" alt="notifiche" />
                        </div>
                    </div>
                </div>
                <div class="pointer-events-none absolute inset-px rounded-lg shadow-sm ring-1 ring-black/5 max-lg:rounded-b-4xl lg:rounded-r-4xl"></div>
            </div>
        </div>
    </div>
</div>
<!-- CTA PER I PARTNER-->
<div class="bg-white dark:bg-gray-800/80">
    <div class="mx-auto max-w-7xl py-24 sm:px-6 sm:py-32 lg:px-8">
        <div class="relative isolate overflow-hidden bg-gray-900 px-6 pt-16 shadow-2xl sm:rounded-3xl sm:px-16 md:pt-24 lg:flex lg:gap-x-20 lg:px-24 lg:pt-0">
            <svg viewBox="0 0 1024 1024" class="absolute top-1/2 left-1/2 -z-10 size-256 -translate-y-1/2 mask-[radial-gradient(closest-side,white,transparent)] sm:left-full sm:-ml-80 lg:left-1/2 lg:ml-0 lg:-translate-x-1/2 lg:translate-y-0" aria-hidden="true">
                <circle cx="512" cy="512" r="512" fill="url(#759c1415-0410-454c-8f7c-9a820de03641)" fill-opacity="0.7" />
                <defs>
                    <radialGradient id="759c1415-0410-454c-8f7c-9a820de03641">
                        <stop stop-color="#7775D6" />
                        <stop offset="1" stop-color="#E935C1" />
                    </radialGradient>
                </defs>
            </svg>
            <div class="mx-auto max-w-md text-center lg:mx-0 lg:flex-auto lg:py-32 lg:text-left">
                <h2 class="text-3xl font-semibold tracking-tight text-balance text-white sm:text-4xl">Prova gratis per 14 giorni.</h2>
                <p class="mt-6 text-lg/8 text-pretty text-gray-300">Il nostro sistema gestisce automaticamente calendari, promemoria e pagamenti, mentre tu ti concentri sui tuoi clienti.</p>
                <div class="mt-10 flex items-center justify-center gap-x-6 lg:justify-start">
                    <a href="/Home/ForPartner" class="rounded-md bg-white px-3.5 py-2.5 text-sm font-semibold text-gray-900 shadow-xs hover:bg-gray-100 focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-white">Diventa nostro partner</a>
                </div>
            </div>
            <div class="relative mt-16 h-80 lg:mt-8">
                <img class="absolute top-0 left-0 w-228 max-w-none rounded-md bg-white/5 ring-1 ring-white/10" src="https://tailwindcss.com/plus-assets/img/component-images/dark-project-app-screenshot.png" alt="App screenshot" width="1824" height="1080">
            </div>
        </div>
    </div>
</div>

<script>
    // Script per migliorare l'esperienza utente
    document.addEventListener('DOMContentLoaded', function() {
        const searchForm = document.getElementById('homeSearchForm');
        const serviceInput = document.getElementById('service');
        const locationInput = document.getElementById('location');
        const dateInput = document.getElementById('date');

        // Auto-suggest per servizi
        let searchTimeout;
        serviceInput.addEventListener('input', function() {
            clearTimeout(searchTimeout);
            const query = this.value.trim();

            if (query.length >= 2) {
                searchTimeout = setTimeout(() => {
                    // Chiamata per suggerimenti servizi
                    fetch(`/Search/Suggestions?q=${encodeURIComponent(query)}&limit=5`)
                        .then(response => response.json())
                        .then(data => {
                            showSuggestions(data.suggestions, serviceInput);
                        })
                        .catch(error => console.log('Errore suggerimenti:', error));
                }, 300);
            }
        });

        // Geolocalizzazione per il campo location
        if ("geolocation" in navigator) {
            const geoButton = document.createElement('button');
            geoButton.type = 'button';
            geoButton.className = 'absolute right-2 top-1/2 transform -translate-y-1/2 text-purple-600 hover:text-purple-700';
            geoButton.innerHTML = '<i class="fas fa-location-arrow"></i>';
            geoButton.title = 'Usa la mia posizione';

            locationInput.parentElement.style.position = 'relative';
            locationInput.parentElement.appendChild(geoButton);

            geoButton.addEventListener('click', function() {
                this.innerHTML = '<i class="fas fa-spinner fa-spin"></i>';

                navigator.geolocation.getCurrentPosition(
                    function(position) {
                        // Geocoding inverso (richiederebbe un servizio)
                        locationInput.value = 'Posizione corrente';
                        geoButton.innerHTML = '<i class="fas fa-check text-green-600"></i>';
                        setTimeout(() => {
                            geoButton.innerHTML = '<i class="fas fa-location-arrow"></i>';
                        }, 2000);
                    },
                    function(error) {
                        geoButton.innerHTML = '<i class="fas fa-exclamation-triangle text-red-600"></i>';
                        setTimeout(() => {
                            geoButton.innerHTML = '<i class="fas fa-location-arrow"></i>';
                        }, 2000);
                    }
                );
            });
        }

        // Validazione form
        searchForm.addEventListener('submit', function(e) {
            const service = serviceInput.value.trim();
            const location = locationInput.value.trim();

            if (!service && !location) {
                e.preventDefault();
                alert('Inserisci almeno un servizio o una località per la ricerca');
                return false;
            }
        });

        // Imposta data di default a domani
        if (!dateInput.value) {
            const tomorrow = new Date();
            tomorrow.setDate(tomorrow.getDate() + 1);
            dateInput.value = tomorrow.toISOString().split('T')[0];
        }
    });

    function showSuggestions(suggestions, inputElement) {
        // Rimuovi suggerimenti esistenti
        const existingSuggestions = document.getElementById('serviceSuggestions');
        if (existingSuggestions) {
            existingSuggestions.remove();
        }

        if (suggestions.length === 0) return;

        // Crea container suggerimenti
        const suggestionsContainer = document.createElement('div');
        suggestionsContainer.id = 'serviceSuggestions';
        suggestionsContainer.className = 'absolute z-10 w-full bg-white border border-gray-200 rounded-lg shadow-lg mt-1 max-h-48 overflow-y-auto';

        suggestions.forEach(suggestion => {
            const suggestionItem = document.createElement('div');
            suggestionItem.className = 'p-3 hover:bg-gray-50 cursor-pointer border-b border-gray-100 last:border-b-0';
            suggestionItem.innerHTML = `
                <div class="flex items-center">
                    <i class="fas ${suggestion.tipo === 'salone' ? 'fa-store' : 'fa-cut'} text-gray-400 mr-3"></i>
                    <div>
                        <div class="font-medium text-gray-900">${suggestion.nome}</div>
                        <div class="text-sm text-gray-500">${suggestion.location}</div>
                    </div>
                </div>
            `;

            suggestionItem.addEventListener('click', function() {
                inputElement.value = suggestion.nome;
                suggestionsContainer.remove();
            });

            suggestionsContainer.appendChild(suggestionItem);
        });

        // Posiziona i suggerimenti
        inputElement.parentElement.style.position = 'relative';
        inputElement.parentElement.appendChild(suggestionsContainer);

        // Chiudi suggerimenti quando si clicca fuori
        document.addEventListener('click', function closeHandler(e) {
            if (!inputElement.contains(e.target) && !suggestionsContainer.contains(e.target)) {
                suggestionsContainer.remove();
                document.removeEventListener('click', closeHandler);
            }
        });
    }
</script>